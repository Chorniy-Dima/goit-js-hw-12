{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nexport default async function getImagesByQuery(query, page) {\n    try {\n        const response = await axios.get(\"https://pixabay.com/api/\", {\n        params: {\n            key: \"36689321-8b59aad86c27c2e69221e9297\",\n            q: query,\n            image_type: \"photo\",\n            orientation: \"horizontal\",\n            safesearch: \"true\",\n            page: page,\n            per_page: 15\n        }\n    });\n    return response.data;      \n    } catch (error) {\n        console.log(error);\n        throw error;\n    }\n};","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\nconst loadBtn = document.querySelector(\".load-btn\")\n\nlet lightbox = new SimpleLightbox('.gallery-item a', {\n        captions: true,\n        captionsData: 'alt',\n        captionDelay: 250\n    });\n\n\nexport function createGallery(images) {\n    const code  = images.map(pic => {\n        return `<div class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${pic.largeImageURL}\">\n            <img class=\"gallery-image\" src=\"${pic.webformatURL}\" alt=\"${pic.tags}\" />\n          </a>\n          <div class=\"descr\">\n            <div class=\"descr-container\">\n              <h6 class=\"pic-title\">Likes</h6>\n              <p class=\"pic-txt\">${pic.likes}</p>\n            </div>\n            <div class=\"descr-container\">\n              <h6 class=\"pic-title\">Views</h6>\n              <p class=\"pic-txt\">${pic.views}</p>\n            </div>\n            <div class=\"descr-container\">\n              <h6 class=\"pic-title\">Comments</h6>\n              <p class=\"pic-txt\">${pic.comments}</p>\n            </div>\n            <div class=\"descr-container\">\n              <h6 class=\"pic-title\">Downloads</h6>\n              <p class=\"pic-txt\">${pic.downloads}</p>\n            </div>\n          </div>\n        </div>`\n    }).join(\"\");\n    gallery.insertAdjacentHTML(\"beforeEnd\", code);\n    lightbox.refresh();\n};\n\nexport function clearGallery() {\n    gallery.innerHTML = \"\";\n};\n\nexport function showLoader() {\n  loader.classList.remove('hidden');\n};\n\nexport function hideLoader() {\n    loader.classList.add('hidden');\n};\n\nexport function showLoadMoreButton() {\n  loadBtn.classList.remove('hidden');\n}\n\nexport function hideLoadMoreButton() {\n  loadBtn.classList.add('hidden');\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport getImagesByQuery from \"./js/pixabay-api.js\";\nimport { createGallery, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton } from \"./js/render-functions.js\";\n\nconst form = document.querySelector(\".form\");\nconst input = document.querySelector(\".form input\");\nconst loadBtn = document.querySelector(\".load-btn\")\n\nlet page = 1;\n\n\nform.addEventListener(\"submit\", async (event) => {\n    event.preventDefault();\n    page = 1;\n\n    if (input.value.trim() === \"\") {\n        iziToast.error({\n                  title: '',\n                  message: 'The field cannot be empty',\n                  position: \"topRight\"\n                });\n        return;\n    };\n\n    clearGallery();\n    hideLoadMoreButton();\n    showLoader();\n\n    try {\n        const data = await getImagesByQuery(input.value, page);\n        const arr = data.hits;\n        if (arr.length === 0) {\n                iziToast.error({\n                    title: '',\n                    message: 'Sorry, there are no images matching<br> your search query. Please try again!',\n                    position: \"topRight\"\n                });\n        } else {\n            createGallery(arr);\n            let res = Math.ceil(data.totalHits / 15);\n            if (page < res) {\n                showLoadMoreButton();\n            } else {\n                iziToast.info({\n                  title: '',\n                  message: \"We're sorry, but you've reached the end of search results.\",\n                  position: \"topRight\"\n              });\n            }\n            page += 1;\n            };\n    } catch (error) {\n        console.log(error);\n    } finally {\n        hideLoader();\n    }\n});\n\nloadBtn.addEventListener(\"click\", async () => {\n    try {\n    showLoader();\n    const data = await getImagesByQuery(input.value, page);\n    const arr = data.hits;\n    createGallery(arr);\n    hideLoader();\n    let res = Math.ceil(data.totalHits / 15);\n    if (page === res) {\n        iziToast.info({\n            title: '',\n            message: \"We're sorry, but you've reached the end of search results.\",\n            position: \"topRight\"\n        });\n        hideLoadMoreButton();\n    };\n        \n    const galleryItem = document.querySelector(\".gallery-item\");\n    if (galleryItem) {\n       const itemHeight = galleryItem.getBoundingClientRect();\n       window.scrollBy({\n          top: itemHeight.height * 2,\n          behavior: \"smooth\"\n    });\n    };\n        \n    page += 1;\n    } catch (error) {\n        console.log(error);\n    }\n})"],"names":["getImagesByQuery","query","page","axios","error","gallery","loader","loadBtn","lightbox","SimpleLightbox","createGallery","images","code","pic","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","input","event","iziToast","data","arr","res","galleryItem","itemHeight"],"mappings":"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"}